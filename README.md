# p2pp
**Palette2 Post Processing tool for Slic3r**


**Purpose:**

Allow Palette 2 users to exploit all freatures and functionality of the palette 2 (Pro) with their Prusa devices, including

- use of variable layers without blowing up the wipe tower
- wipe to waste object
- wipe to infill

P2PP currently only works for devices in a connected setup.  It does not generqte the reauired sequences required to meet the Pause-based pings

**Functionality:**

P2PP works as a post processor to GCode files generated by Splic3r, just like Chroma does.   If does however not create any new code for wipe towers etc, it just adds a Palette 2 MCF header to the file and inserts Ping information in the Gcode at set intervals.  

**Setup and Configuration:**

P2PP is a python script with a  shell script/batch file wrapper.  just put all in a folder of your choice and make sure the py and sh files are made executable when running on a unix/osx system.   The remainder of the configuration is done in Slic3r PE

Prior to using the script it is important to *setup the printer according to the specifications set by Mosaic* <LINK>

In addition to that the following setup is required to work Palette 2 Post Processor

**!!! FOR NOW THERE IS LITTLE ERROR CHECKING ON THE P2PP CODES SO MAKE SURE TO ENTER EVERYTHINGS AS SHOWN INCLUDING CAPITALS ETC**


**Add the followinf information to the SLic3r Printer Settings startup g-code

*;P2PP PRINTERPROFILE=0313be853ee2990c 
;(make sure to replace with your printer profile, this can be retrieved from a canvas or chroma generated file.   At this ;moment I have no information on how to create this ID, I have asked Mosaic and support will let me know if we can use any ;random number.   An unknown number should trigger the printer to make a new profile and do tube length calibration.  Once ;this has been cleared out I will add some better description here

*;P2PP SPLICEOFFSET=30

*;P2PP MINSTARTSPLICE=100

*;P2PP MINSPLICE=70


If you want the splice length warnings to contain layer information you also need to add the following information to the **AFTER LAYER CHANGE GCode of your Slic3r Printer Profile**.  Text between [] will be automatically converted to actual values by Slic3R PE when exporting the GCode to disk or to the printer.

*;AFTER_LAYER_CHANGE

*;LAYER [layer_num]

The splice process is now defined in the Statup GCode of the Slic3r Print profile.  Based on the materials a user can define heat/compression/cooling additional.  The MATERIAL_DEFAULT setting provides a configurable fallback in case no profile is defined for the material combination.   **NOTE:**  these entries are not symmetrical, ie you need to define both directions in order to specify a complete process


*;P2PP MATERIAL_DEFAULT_0_0_0

*;P2PP MATERIAL_PVA_PVA_0_0_0

*;P2PP MATERIAL_PVA_PLA_0_0_0

*;P2PP MATERIAL_PLA_PLA_0_0_0


Under **Print Settings - Output options** you will find the possibility to add a **post-processing script**.  Put the full name of the .sh (unix/Mac OSX) or .bat  (Windows) in this window.  Include the full path (don't use ~ for OSX).  Add no parameters.

e.g */Users/tomvandeneede/IdeaProjects/P2PP/P2PP.sh*


Please note that start slice distance minimum is 100, minimum slice distance can be set as low as 40... this may impact the speed at which filament can be created so print speed may have to be adjusted accordingly

**Add the following lines exactly as shown to *EACH* filament profile you want to use with the palette 2.**
These changes will not interfere with the normal working under other profiles.

;P2PP FN=[filament_preset]

;P2PP FT=[filament_type]

;P2PP FC=[extruder_colour]


On your first prints make sure to review the output file to make sure it contains the Omega header. (bunch of comands starting this capital letter O (oh)

Good luck!!!



